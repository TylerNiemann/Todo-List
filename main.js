(()=>{"use strict";class t{constructor(t){this.name=t,this.tasks=[]}setName(t){this.name=t}getName(){return this.name}editProject=t=>{this.name=t,console.log(this.projects)}}class e{constructor(){this.projects=[]}setProjects(t){this.projects=t}setName(t){this.name=t}addProject(t){this.projects.push(t),console.log(this.projects)}getProjects(){return this.projects}getProject(t){return this.projects.find((e=>e.name===t))}deleteProject=t=>{const e=this.projects.find((e=>e.name===t));this.projects.splice(this.projects.indexOf(e),1)};editProject=(t,e)=>{console.log(t),console.log(e);let o=this.getProject(t);o=e,console.log(this.projects)}}class o{static saveTodoList=t=>{localStorage.setItem("todoList",JSON.stringify(t))};static getTodoList=()=>{const o=Object.assign(new e,JSON.parse(localStorage.getItem("todoList")));return o.setProjects=o.getProjects().map((e=>Object.assign(new t,e))),o};static newProject=()=>{const e=document.getElementById("projectForm"),o=new t(e.title.value);s.closeAddForm(),this.addProject(o),s.createProject(o.getName())};static addProject=t=>{const e=this.getTodoList();e.addProject(t),this.saveTodoList(e)};static deleteProject=t=>{const e=this.getTodoList();e.deleteProject(t),this.saveTodoList(e)};static changeProject=(t,e)=>{const o=this.getTodoList();o.editProject(t,e),this.saveTodoList(o)};static editProject=(e,o)=>{console.log(e.textContent),s.closeEditForm();const c=new t(o);this.addProject(c),s.createPage(c.getName()),s.createProject(c.getName()),s.changeProject(e),window.location.reload()}}class s{static pageListeners=()=>{document.getElementById("openProjectForm").addEventListener("click",this.openAddForm),document.getElementById("closeProject").addEventListener("click",this.closeAddForm),document.getElementById("closeEditProject").addEventListener("click",this.closeEditForm),document.getElementById("addProject").addEventListener("click",o.newProject),document.getElementById("projectList").addEventListener("click",(t=>{t.target.classList.contains("project")?this.createPage(t.target.textContent):t.target.classList.contains("delete")?this.removeProject(t.target):t.target.classList.contains("editProject")&&this.editProject(t.target)}))};static loadProjects=()=>{o.getTodoList().getProjects().forEach((t=>{this.createProject(t.name),this.createPage(t.name)}))};static openAddForm(){document.getElementById("projectModal").style.display="block"}static openEditForm(){document.getElementById("editProjectModal").style.display="block"}static closeEditForm(){editProjectModal.style.display="none",editProjectForm.reset()}static closeAddForm=()=>{event.preventDefault(),projectModal.style.display="none",projectForm.reset()};static createProject=t=>{const e=document.createElement("div"),o=document.createElement("h4"),s=document.createElement("button"),c=document.createElement("button");s.textContent="x",c.textContent="Edit",o.textContent=t,e.classList.add("projectContainer"),c.classList.add("editProject"),s.classList.add("delete"),o.classList.add("project"),projectList.appendChild(e),projectList.insertBefore(e,projectModal),e.appendChild(s),e.appendChild(o),e.appendChild(c)};static createPage=t=>{const e=document.getElementById("taskList");e.innerHTML="";const o=document.createElement("h2");o.textContent=t,o.classList.add("projectTitle"),e.appendChild(o)};static removeProject=t=>{const e=t.nextElementSibling,s=t.closest(".projectContainer"),c=document.getElementById("taskList");o.deleteProject(e.textContent),s.innerHTML="",s.remove(),c.innerHTML=""};static changeProject=t=>{const e=t.closest(".projectContainer"),s=document.getElementById("taskList");e.innerHTML="",e.remove(),s.innerHTML="",o.deleteProject(t.textContent)};static editProject=t=>{this.openEditForm();const e=t.previousElementSibling,s=document.getElementById("editProjectForm");s.addEventListener("submit",(t=>{t.preventDefault(),o.editProject(e,s.title.value)}))}}document.addEventListener("DOMContentLoaded",s.pageListeners),document.addEventListener("DOMContentLoaded",s.loadProjects)})();